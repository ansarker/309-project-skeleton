{"filter":false,"title":"articles.server.controller.js","tooltip":"/controllers/articles.server.controller.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":11,"column":2},"end":{"row":12,"column":0},"action":"remove","lines":["",""],"id":117}],[{"start":{"row":0,"column":0},"end":{"row":100,"column":2},"action":"remove","lines":["var mongoose = require('mongoose');","var Article = require('./../models/Article.js');","var errorHandler = require('./errors.server.controller');","var _ = require('lodash');","","","module.exports.singleView = function(req, res) {","  res.render('./../public/views/article/view.ejs', {","    user: req.user || null,","    request: req","  });","};","","module.exports.listView = function(req, res) {","  Article.find(function(err, data) {","    if (err) {","      return res.status(400).send({","","          message: errorHandler.getErrorMessage(err)","        });","    } else {","      console.log(\"api called\");","      res.render('./../public/views/article/all.ejs', {","        user: req.user || null,","        request: req,","        articles: data","      });","    }","  });  ","};","","","module.exports.list = function(req, res) {","  Article.find(function(err, data) {","    if (err) {","      return res.status(400).send({","","          message: errorHandler.getErrorMessage(err)","        });","    } else {","      console.log(\"api called\");","","      res.status(200).send(data);","    }","  });","};","","module.exports.create = function(req, res) {","  var article = new Article(req.body);","  article.user = req.user;","  article.save(function(err, data) {","    if (err) {","      return res.status(400).send({","","          message: errorHandler.getErrorMessage(err)","        });","    } else {","      res.status(200).send(data);","    }","  });","};","","module.exports.read = function(req, res) {","  res.json(req.article);","};","","","exports.delete = function(req, res) {","  var article = req.article;","  article.remove(function(err) {","    if (err) {","      return res.status(400).send();","    } else {","      res.json(article);","    }","  });","};","","","module.exports.update = function(req, res) {","  var article = req.article;","","    article = _.extend(article, req.body);","","    article.save(function(err) {","      if (err) {","        return res.status(400).send();","      } else {","        res.json(article);","      }","    });","};","","exports.articleByID = function(req, res, next, id) {","  Article.findById(id).populate('user', 'email').exec(function(err, article) {","    if (err) return next(err);","    if (!article) return next(new Error('Failed to load article ' + id));","    req.article = article;","    next();","  });","};"],"id":118},{"start":{"row":0,"column":0},"end":{"row":111,"column":2},"action":"insert","lines":["var mongoose = require('mongoose');","var Article = require('./../models/Article.js');","var errorHandler = require('./errors.server.controller');","var _ = require('lodash');","","module.exports.createView = function(req, res){","  res.render('./../public/views/article/new.ejs', {","          user: req.user || null,","          request: req","        });","};","","module.exports.singleView = function(req, res){","  res.render('./../public/views/article/view.ejs', {","          user: req.user || null,","          request: req","        });","}","","module.exports.listView = function(req, res) {","    Article.find(function(err, data) {","      if (err) {","        return res.status(400).send({","","          message: errorHandler.getErrorMessage(err)","        });","      }","      else {","        console.log(\"api called\");","","        res.render('./../public/views/article/all.ejs', {","          user: req.user || null,","          request: req,","          articles: data","        });","      }","    });","  ","\t","};","","","","module.exports.list = function(req, res) {","  Article.find(function(err, data) {","    if (err) {","      return res.status(400).send({","","  \t\t\t\tmessage: errorHandler.getErrorMessage(err)","  \t\t\t});","    } else {","      console.log(\"api called\");","","      res.status(200).send(data);","    }","  });","};","","module.exports.create = function(req, res) {","  var article = new Article(req.body);","  article.user = req.user;","  article.save(function(err, data) {","    if (err) {","      return res.status(400).send({","","  \t\t\t\tmessage: errorHandler.getErrorMessage(err)","  \t\t\t});","    } else {","      res.status(200).send(data);","    }","  });","};","","module.exports.read = function(req, res) {","  res.json(req.article);","};","","","exports.delete = function(req, res) {","\tvar article = req.article;","\tarticle.remove(function(err) {","\t\tif (err) {","\t\t\treturn res.status(400).send();","\t\t} else {","\t\t\tres.json(article);","\t\t}","\t});","};","","","module.exports.update = function(req, res) {","  var article = req.article;","","  \tarticle = _.extend(article, req.body);","","  \tarticle.save(function(err) {","  \t\tif (err) {","  \t\t\treturn res.status(400).send();","  \t\t} else {","  \t\t\tres.json(article);","  \t\t}","  \t});","};","","exports.articleByID = function(req, res, next, id) {","\tArticle.findById(id).populate('user', 'email').exec(function(err, article) {","\t\tif (err) return next(err);","\t\tif (!article) return next(new Error('Failed to load article ' + id));","\t\treq.article = article;","\t\tnext();","\t});","};"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":22},"end":{"row":8,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":8,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1520997863854,"hash":"e9e325952b930246d0eba4ca7f225813724c9779"}